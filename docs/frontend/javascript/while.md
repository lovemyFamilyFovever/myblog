```js
var i = 5;
while (i--) {
  console.log(i)
}
请把每一步的判断和结果数出来，为什么最后i=1的时候，明明i--已经是0了还会执行console.log?
```

这是一个非常好的问题！它涉及到 `while` 循环中 **条件判断的时机** 和 **后置递减操作符（`i--`）的行为**。

我们来一步步分析这段代码：

javascript

```
var i = 5;
while (i--) {
  console.log(i);
}
```

------

### 🔍 核心知识点

1. **`i--` 是“后置递减”操作符**：
   - 它会**先返回 `i` 的当前值**作为表达式的值（用于判断），
   - 然后再将 `i` 减 1。
2. **`while` 条件判断的是表达式的返回值**：
   - 如果表达式返回的是 **真值（truthy）**，循环继续。
   - 如果是 **假值（falsy）**，循环结束。
   - 在 JavaScript 中，`0` 是 **假值**，非零数是真值。

------

### ✅ 逐步执行过程

我们来模拟每一步的执行：

| 步骤 | 判断前 `i` 的值 | `while(i--)` 发生了什么？          | 条件真假 | 是否进入循环体 | `console.log(i)` 输出 | 循环结束后 `i` 的值 |
| ---- | --------------- | ---------------------------------- | -------- | -------------- | --------------------- | ------------------- |
| 1    | 5               | 返回 `5`（真值），然后 `i` 变成 4  | ✅ true   | ✅ 是           | `4`                   | 4                   |
| 2    | 4               | 返回 `4`（真值），然后 `i` 变成 3  | ✅ true   | ✅ 是           | `3`                   | 3                   |
| 3    | 3               | 返回 `3`（真值），然后 `i` 变成 2  | ✅ true   | ✅ 是           | `2`                   | 2                   |
| 4    | 2               | 返回 `2`（真值），然后 `i` 变成 1  | ✅ true   | ✅ 是           | `1`                   | 1                   |
| 5    | 1               | 返回 `1`（真值），然后 `i` 变成 0  | ✅ true   | ✅ 是           | `0`                   | 0                   |
| 6    | 0               | 返回 `0`（假值），然后 `i` 变成 -1 | ❌ false  | ❌ 否           | ——                    | -1                  |

------

### 🎯 关键解释：为什么 `i=1` 时还会执行 `console.log`？

你问：

> “为什么最后 `i=1` 的时候，明明 `i--` 已经是 `0` 了，还会执行 `console.log`？”

答案是：

🔴 **在 `i=1` 时，`i--` 表达式的值是 `1`（不是 `0`）！**

- 当

   

  ```
  i = 1
  ```

  ，进入

   

  ```
  while(i--)
  ```

  ：

  - 第一步：**返回 `i` 的当前值 `1`**（这是判断依据）。
  - 第二步：**再把 `i` 减 1，变成 `0`**。

- 因为返回的是 `1`（真值），所以 `while` 判断为 `true`，**进入循环体**。

- 此时 `i` 已经是 `0` 了，所以 `console.log(i)` 输出 `0`。

✅ 所以并不是“`i=0` 还执行”，而是：

> “当 `i=1` 时，`i--` 返回 `1`（true），于是进入循环，但此时 `i` 已被减为 `0`，所以输出 `0`。”

------

### 📌 最终输出结果

text

```
4
3
2
1
0
```

- 循环共执行了 **5 次**。
- 输出的是递减后的 `i` 值（因为 `i--` 先返回原值判断，再减 1，进入循环时 `i` 已更新）。

------

### 💡 对比：如果用前置递减 `--i`

javascript

```
var i = 5;
while (--i) {
  console.log(i);
}
```

行为不同：

- `--i` 是**先减 1，再返回新值**。
- 当 `i=1` 时，`--i` 会先把 `i` 变成 `0`，然后返回 `0`（false），**不进入循环**。

输出：

```
4
3
2
1
```

（不会输出 `0`）

------

### ✅ 总结

| 操作  | 行为               | 何时判断         |
| ----- | ------------------ | ---------------- |
| `i--` | 先返回 `i`，再减 1 | 判断的是**旧值** |
| `--i` | 先减 1，再返回     | 判断的是**新值** |

在你的代码中：

> `while(i--)` 在 `i=1` 时返回 `1`（true），所以会进入循环，但进入后 `i` 已是 `0`，所以 `console.log(i)` 输出 `0`。

这就是看似“矛盾”实则完全符合逻辑的原因。